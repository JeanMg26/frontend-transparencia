import{Q as b}from"./QInput.d45c9e43.js";import{_ as k,C as q,S as V,a0 as P,r as i,D as p,E as _,F as t,O as a,G as r,aq as B,M as w,H as C,L as E,J as v,Q as y,T as F,V as U,P as z,R as J}from"./index.4f03f91b.js";import{Q as N}from"./QSpinnerBars.faaa4498.js";import{Q as R,u as T,p as j}from"./validation.d8c4b050.js";import{Q as A,a as D}from"./QCard.15344bc4.js";import{Q as W}from"./QPage.93c896a6.js";import{s as $,A as G}from"./api_rest.be0b8500.js";import{u as H}from"./JWT.d4a2f31b.js";import"./use-dark.187236d0.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./axios.beb5d2fc.js";const g=u=>(z("data-v-cf80ba1a"),u=u(),J(),u),L={class:"container-signin"},M=g(()=>a("div",{class:"q-mb-sm"},[a("span",{class:"q-page-header"},"Iniciar Sesi\xF3n")],-1)),O={class:"form-group"},K=g(()=>a("span",{class:"q-label-input"},"Nombre de usuario",-1)),X={key:0,class:"q-label-error"},Y={class:"form-group q-mt-md"},Z=g(()=>a("span",{class:"q-label-input"},"Contrase\xF1a",-1)),ee=q({__name:"SignInPage",setup(u){const h=V(),S=H(),o=P({username:"",password:""}),m=i(!1),n=i(""),l=i(!1),d=i(null),c=i(null),I=()=>{n.value="",d.value.resetValidation()},x=()=>{c.value.resetValidation()},Q=async()=>{var f,s;m.value=!0;try{const{data:e}=await $({username:o.username,password:o.password});U.set("jwt_access",e.jwt),S.setJWTStore(e.jwt),h.push({name:"Dashboard"}),console.log(e)}catch(e){if(e instanceof G&&(f=e.response)!=null&&f.data)switch((s=e.response)==null?void 0:s.data.code){case 1e3:n.value="El usuario o contrase\xF1a son incorrectos.";break}}finally{m.value=!1}};return(f,s)=>(p(),_(W,{class:"container"},{default:t(()=>[a("div",L,[M,r(D,{flat:"",bordered:"",class:"card-sigin"},{default:t(()=>[r(A,null,{default:t(()=>[r(R,{onSubmit:Q,greedy:""},{default:t(()=>[a("div",O,[K,r(b,{dense:"",outlined:"",modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=e=>o.username=e),type:"text",class:B(["q-mt-xs",{"error-back":n.value}]),placeholder:"Ingresar su bombre de usuario",rules:w(T),"no-error-icon":!0,ref_key:"refUsername",ref:d,onBlur:s[1]||(s[1]=e=>I()),"hide-bottom-space":!(d.value&&d.value.hasError)},null,8,["modelValue","class","rules","hide-bottom-space"]),n.value?(p(),C("span",X,E(n.value),1)):v("",!0)]),a("div",Y,[Z,r(b,{dense:"",outlined:"",modelValue:o.password,"onUpdate:modelValue":s[3]||(s[3]=e=>o.password=e),type:l.value?"text":"password",class:"q-mt-xs",placeholder:"Ingresar tu contrase\xF1a",rules:w(j),"no-error-icon":!0,ref_key:"refPassword",ref:c,onBlur:s[4]||(s[4]=e=>x()),"hide-bottom-space":!(c.value&&c.value.hasError)},{append:t(()=>[a("span",{onClick:s[2]||(s[2]=e=>l.value=!l.value)},[l.value?v("",!0):(p(),_(y,{key:0,name:"fa-solid fa-eye",size:"1rem",class:"cursor-pointer"})),l.value?(p(),_(y,{key:1,name:"fa-solid fa-eye-slash",size:"1rem",class:"cursor-pointer"})):v("",!0)])]),_:1},8,["modelValue","type","rules","hide-bottom-space"])]),a("div",null,[r(F,{"no-caps":"",unelevated:"",ripple:!1,color:"primary",label:"Ingresar",type:"submit",class:"full-width q-mt-lg",loading:m.value},{loading:t(()=>[r(N,{size:"20px"})]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})])]),_:1}))}});var me=k(ee,[["__scopeId","data-v-cf80ba1a"]]);export{me as default};
