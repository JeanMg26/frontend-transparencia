import{a4 as ne,a5 as K,a6 as X,u as z,a7 as Y,A as Q,r as C,a8 as O,e as N,t as U,d as _,w as P,q as le,g as oe,Z as D,a9 as k,a1 as ie,aa as ae,x as se,ab as ue,ac as re,ad as ce,a as j}from"./index.4f03f91b.js";import{c as de}from"./selection.82da9296.js";import{r as I,a as fe}from"./focus-manager.02955f48.js";const he=[null,document,document.body,document.scrollingElement,document.documentElement];function Me(e,t){let n=ne(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return he.includes(n)?window:n}function Pe(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function ke(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let M;function me(){if(M!==void 0)return M;const e=document.createElement("p"),t=document.createElement("div");K(e,{width:"100%",height:"200px"}),K(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let l=e.offsetWidth;return n===l&&(l=t.clientWidth),t.remove(),M=n-l,M}function Ce(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}function Se(){let e=null;const t=Q();function n(){e!==null&&(clearTimeout(e),e=null)}return X(n),z(n),{removeTimeout:n,registerTimeout(l,o){n(),Y(t)===!1&&(e=setTimeout(l,o))}}}const $e={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function ze({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:l,proxy:o,emit:u}=Q(),i=C(null);let c=null;function d(a){return i.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const r={};n===void 0&&(Object.assign(r,{hide(a){o.hide(a)},toggle(a){o.toggle(a),a.qAnchorHandled=!0},toggleKey(a){O(a,13)===!0&&r.toggle(a)},contextClick(a){o.hide(a),N(a),U(()=>{o.show(a),a.qAnchorHandled=!0})},prevent:N,mobileTouch(a){if(r.mobileCleanup(a),d(a)!==!0)return;o.hide(a),i.value.classList.add("non-selectable");const s=a.target;_(r,"anchor",[[s,"touchmove","mobileCleanup","passive"],[s,"touchend","mobileCleanup","passive"],[s,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{c=null,o.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){i.value.classList.remove("non-selectable"),c!==null&&(clearTimeout(c),c=null),e.value===!0&&a!==void 0&&de()}}),n=function(a=l.contextMenu){if(l.noParentEvent===!0||i.value===null)return;let s;a===!0?o.$q.platform.is.mobile===!0?s=[[i.value,"touchstart","mobileTouch","passive"]]:s=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:s=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],_(r,"anchor",s)});function f(){oe(r,"anchor")}function v(a){for(i.value=a;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;n()}function g(){if(l.target===!1||l.target===""||o.$el.parentNode===null)i.value=null;else if(l.target===!0)v(o.$el.parentNode);else{let a=l.target;if(typeof l.target=="string")try{a=document.querySelector(l.target)}catch{a=void 0}a!=null?(i.value=a.$el||a,n()):(i.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return P(()=>l.contextMenu,a=>{i.value!==null&&(f(),n(a))}),P(()=>l.target,()=>{i.value!==null&&f(),g()}),P(()=>l.noParentEvent,a=>{i.value!==null&&(a===!0?f():n())}),le(()=>{g(),t!==!0&&l.modelValue===!0&&i.value===null&&u("update:modelValue",!1)}),z(()=>{c!==null&&clearTimeout(c),f()}),{anchorEl:i,canShow:d,anchorEvents:r}}function qe(e,t){const n=C(null);let l;function o(c,d){const r=`${d!==void 0?"add":"remove"}EventListener`,f=d!==void 0?d:l;c!==window&&c[r]("scroll",f,D.passive),window[r]("scroll",f,D.passive),l=d}function u(){n.value!==null&&(o(n.value),n.value=null)}const i=P(()=>e.noParentEvent,()=>{n.value!==null&&(u(),t())});return z(i),{localScrollTarget:n,unconfigureScrollTarget:u,changeScrollEvent:o}}const E=[];function Ae(e){return E.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function ve(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return k(e)}else if(e.__qPortal===!0){const n=k(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=k(e)}while(e!=null)}function De(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=ve(e,t);continue}e.hide(t)}e=k(e)}}function ge(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Fe(e,t,n,l){const o=C(!1),u=C(!1);let i=null;const c={},d=l==="dialog"&&ge(e);function r(v){if(v===!0){I(c),u.value=!0;return}u.value=!1,o.value===!1&&(d===!1&&i===null&&(i=re(!1,l)),o.value=!0,E.push(e.proxy),fe(c))}function f(v){if(u.value=!1,v!==!0)return;I(c),o.value=!1;const g=E.indexOf(e.proxy);g!==-1&&E.splice(g,1),i!==null&&(ce(i),i=null)}return ie(()=>{f(!0)}),e.proxy.__qPortal=!0,ae(e.proxy,"contentEl",()=>t.value),{showPortal:r,hidePortal:f,portalIsActive:o,portalIsAccessible:u,renderPortal:()=>d===!0?n():o.value===!0?[se(ue,{to:i},n())]:void 0}}function Qe(){let e;const t=Q();function n(){e=void 0}return X(n),z(n),{removeTick:n,registerTick(l){e=l,U(()=>{e===l&&(Y(t)===!1&&e(),e=void 0)})}}}const w=[];let y;function pe(e){y=e.keyCode===27}function we(){y===!0&&(y=!1)}function xe(e){y===!0&&(y=!1,O(e,27)===!0&&w[w.length-1](e))}function Z(e){window[e]("keydown",pe),window[e]("blur",we),window[e]("keyup",xe),y=!1}function je(e){j.is.desktop===!0&&(w.push(e),w.length===1&&Z("addEventListener"))}function Be(e){const t=w.indexOf(e);t>-1&&(w.splice(t,1),w.length===0&&Z("removeEventListener"))}const x=[];function J(e){x[x.length-1](e)}function Ke(e){j.is.desktop===!0&&(x.push(e),x.length===1&&document.body.addEventListener("focusin",J))}function Ne(e){const t=x.indexOf(e);t>-1&&(x.splice(t,1),x.length===0&&document.body.removeEventListener("focusin",J))}const{notPassiveCapture:S}=D,b=[];function $(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=E.length-1;for(;n>=0;){const l=E[n].$;if(l.type.name==="QTooltip"){n--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;n--}for(let l=b.length-1;l>=0;l--){const o=b[l];if((o.anchorEl.value===null||o.anchorEl.value.contains(t)===!1)&&(t===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(t)===!1))e.qClickOutside=!0,o.onClickOutside(e);else return}}function _e(e){b.push(e),b.length===1&&(document.addEventListener("mousedown",$,S),document.addEventListener("touchstart",$,S))}function Ie(e){const t=b.findIndex(n=>n===e);t>-1&&(b.splice(t,1),b.length===0&&(document.removeEventListener("mousedown",$,S),document.removeEventListener("touchstart",$,S)))}let G,V;function Ge(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ve(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const F={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{F[`${e}#ltr`]=e,F[`${e}#rtl`]=e});function Re(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:F[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function be(e,t){let{top:n,left:l,right:o,bottom:u,width:i,height:c}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],l-=t[0],u+=t[1],o+=t[0],i+=t[0],c+=t[1]),{top:n,bottom:u,height:c,left:l,right:o,width:i,middle:l+(o-l)/2,center:n+(u-n)/2}}function Ee(e,t,n){let{top:l,left:o}=e.getBoundingClientRect();return l+=t.top,o+=t.left,n!==void 0&&(l+=n[1],o+=n[0]),{top:l,bottom:l+1,height:1,left:o,right:o+1,width:1,middle:o,center:l}}function ye(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function R(e,t,n,l){return{top:e[n.vertical]-t[l.vertical],left:e[n.horizontal]-t[l.horizontal]}}function Te(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Te(e,t+1)},10);return}const{targetEl:n,offset:l,anchorEl:o,anchorOrigin:u,selfOrigin:i,absoluteOffset:c,fit:d,cover:r,maxHeight:f,maxWidth:v}=e;if(j.is.ios===!0&&window.visualViewport!==void 0){const L=document.body.style,{offsetLeft:W,offsetTop:p}=window.visualViewport;W!==G&&(L.setProperty("--q-pe-left",W+"px"),G=W),p!==V&&(L.setProperty("--q-pe-top",p+"px"),V=p)}const{scrollLeft:g,scrollTop:a}=n,s=c===void 0?be(o,r===!0?[0,0]:l):Ee(o,c,l);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:v||"100vw",maxHeight:f||"100vh",visibility:"visible"});const{offsetWidth:B,offsetHeight:q}=n,{elWidth:ee,elHeight:te}=d===!0||r===!0?{elWidth:Math.max(s.width,B),elHeight:r===!0?Math.max(s.height,q):q}:{elWidth:B,elHeight:q};let m={maxWidth:v,maxHeight:f};(d===!0||r===!0)&&(m.minWidth=s.width+"px",r===!0&&(m.minHeight=s.height+"px")),Object.assign(n.style,m);const T=ye(ee,te);let h=R(s,T,u,i);if(c===void 0||l===void 0)A(h,s,T,u,i);else{const{top:L,left:W}=h;A(h,s,T,u,i);let p=!1;if(h.top!==L){p=!0;const H=2*l[1];s.center=s.top-=H,s.bottom-=H+2}if(h.left!==W){p=!0;const H=2*l[0];s.middle=s.left-=H,s.right-=H+2}p===!0&&(h=R(s,T,u,i),A(h,s,T,u,i))}m={top:h.top+"px",left:h.left+"px"},h.maxHeight!==void 0&&(m.maxHeight=h.maxHeight+"px",s.height>h.maxHeight&&(m.minHeight=m.maxHeight)),h.maxWidth!==void 0&&(m.maxWidth=h.maxWidth+"px",s.width>h.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(n.style,m),n.scrollTop!==a&&(n.scrollTop=a),n.scrollLeft!==g&&(n.scrollLeft=g)}function A(e,t,n,l,o){const u=n.bottom,i=n.right,c=me(),d=window.innerHeight-c,r=document.body.clientWidth;if(e.top<0||e.top+u>d)if(o.vertical==="center")e.top=t[l.vertical]>d/2?Math.max(0,d-u):0,e.maxHeight=Math.min(u,d);else if(t[l.vertical]>d/2){const f=Math.min(d,l.vertical==="center"?t.center:l.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(u,f),e.top=Math.max(0,f-u)}else e.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(u,d-e.top);if(e.left<0||e.left+i>r)if(e.maxWidth=Math.min(i,r),o.horizontal==="middle")e.left=t[l.horizontal]>r/2?Math.max(0,r-i):0;else if(t[l.horizontal]>r/2){const f=Math.min(r,l.horizontal==="middle"?t.middle:l.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(i,f),e.left=Math.max(0,f-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(i,r-e.left)}export{Pe as a,ke as b,me as c,$e as d,Ve as e,Qe as f,Me as g,qe as h,ze as i,Fe as j,Ke as k,Ie as l,Be as m,je as n,_e as o,Re as p,ve as q,Ne as r,Te as s,Ae as t,Se as u,Ge as v,De as w,Ce as x};
