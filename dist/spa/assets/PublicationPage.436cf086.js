import{C as A,S as G,o as v,D as u,E as D,F as s,O as e,H as S,G as t,I as J,L as m,M as T,Q as h,N as E,_ as Q,P as I,R as P,r as _,w as M,v as Y,T as k,q as K,a1 as W,J as z}from"./index.4f03f91b.js";import{Q as X,N as Z,a as ee}from"./NoResults.67ae0d4a.js";import{Q as te}from"./QPage.93c896a6.js";import{Q as V}from"./QSpinnerBars.faaa4498.js";import{Q as H}from"./QInnerLoading.87f5c047.js";import{u as q}from"./Article.3e851d0d.js";import{u as ae}from"./Category.749128ae.js";import{Q as $}from"./QTooltip.0294f36c.js";import{d as B}from"./date.f0f289d7.js";import{Q as y,a as C}from"./QCard.15344bc4.js";import{Q as N}from"./QDialog.a4be6c36.js";import{C as j}from"./ClosePopup.0885fbba.js";import{m as se,n as oe,A as le}from"./api_rest.be0b8500.js";import{Q as ie}from"./QImg.58aea539.js";import"./use-dark.187236d0.js";import"./QInput.d45c9e43.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./format.2bc25e5f.js";import"./use-transition.9e1010fb.js";import"./position-engine.11586397.js";import"./selection.82da9296.js";import"./use-model-toggle.422ce669.js";import"./use-prevent-scroll.adeeee81.js";import"./axios.beb5d2fc.js";const w=a=>(I("data-v-4a12f337"),a=a(),P(),a),re=w(()=>e("thead",{class:"bg-grey-2"},[e("tr",null,[e("th",{class:"text-left"},"Categoria"),e("th",{class:"text-left"},"T\xEDtulo"),e("th",{class:"text-left"},"Autor"),e("th",{class:"text-left"},"Fecha de creaci\xF3n"),e("th",{class:"text-left"},"Fecha de modificaci\xF3n"),e("th",{class:"text-right"},"Acciones")])],-1)),ne={key:0,class:"q-tr--no-hover"},ce={colspan:"5"},de={class:"text-left"},ue={class:"text-left"},pe={class:"text-left"},me={class:"text-left"},_e={class:"text-left"},fe={class:"text-right"},ge={class:"q-gutter-x-md"},ve=w(()=>e("span",null,"Ver",-1)),he=w(()=>e("span",null,"Editar",-1)),xe=w(()=>e("span",null,"Eliminar",-1)),ye=A({__name:"TableDeskArticle",props:{opendialogDeleteArticle:{type:Function,required:!0},opendialogShowArticle:{type:Function,required:!0},articlesState:{type:Object,required:!0}},setup(a){const l=G(),n=q(),r=v(()=>n.isLoadingTable),i=async d=>{l.push({name:"OperationPublication",params:{id:d}})};return(d,p)=>(u(),D(X,{flat:"",bordered:""},{default:s(()=>{var c;return[re,e("tbody",null,[(c=a.articlesState)!=null&&c.length?(u(!0),S(E,{key:1},J(a.articlesState,(o,f)=>(u(),S("tr",{key:f},[e("td",de,m(o.category),1),e("td",ue,m(o.title),1),e("td",pe,m(o.autor),1),e("td",me,m(T(B).formatDate(o.created_at,"DD-MM-YYYY HH:mm:ss")),1),e("td",_e,m(T(B).formatDate(o.updated_at,"DD-MM-YYYY HH:mm:ss")),1),e("td",fe,[e("div",ge,[t(h,{name:"fa-solid fa-eye",color:"positive",class:"cursor-pointer",onClick:x=>a.opendialogShowArticle(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[ve]),_:1})]),_:2},1032,["onClick"]),t(h,{name:"fa-solid fa-edit",color:"primary",class:"cursor-pointer",onClick:x=>i(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[he]),_:1})]),_:2},1032,["onClick"]),t(h,{name:"fa-regular fa-trash-can",color:"red",class:"cursor-pointer",onClick:x=>a.opendialogDeleteArticle(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[xe]),_:1})]),_:2},1032,["onClick"])])])]))),128)):(u(),S("tr",ne,[e("td",ce,[t(Z)])])),t(H,{showing:r.value},{default:s(()=>[t(V,{size:"35px",color:"primary"})]),_:1},8,["showing"])])]}),_:1}))}});var De=Q(ye,[["__scopeId","data-v-4a12f337"]]);const be=a=>(I("data-v-5e4eba7d"),a=a(),P(),a),Se={class:"flex column justify-center items-center"},Ae=be(()=>e("span",null,"\xBFEsta seguro que desea eliminar esta publicaci\xF3n?",-1)),qe={class:"btn-actions q-gutter-x-md q-mt-md"},we=A({__name:"DialogDeleteArticle",props:{openDialog:{type:Boolean,required:!0},articleID:{type:Number,required:!1}},setup(a){const l=a,n=q(),r=_(!1),i=_(!1),d=_(null),p=async()=>{var c;i.value=!0;try{await se(l.articleID),oe("success","Publicaci\xF3n eliminada correctamente"),d.value.hide(),n.isLoadingTable=!0,await n.getListArticlesStore()}catch(o){o instanceof le&&console.log((c=o.response)==null?void 0:c.data)}finally{i.value=!1}};return M(()=>l.openDialog,()=>{r.value=!0}),(c,o)=>(u(),D(N,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=f=>r.value=f),persistent:"",ref_key:"refDialog",ref:d},{default:s(()=>[t(C,{class:"card-article"},{default:s(()=>[t(y,null,{default:s(()=>[e("div",Se,[t(h,{name:"fa-solid fa-circle-exclamation",color:"grey-4",size:"2.5rem",class:"q-mb-md"}),Ae]),e("div",qe,[Y(t(k,{"no-caps":"",unelevated:"",color:"grey-6",label:"Cancelar",size:"0.9rem",type:"button"},null,512),[[j]]),t(k,{"no-caps":"",unelevated:"",color:"red",label:"Eliminar",size:"0.9rem",type:"submit",loading:i.value,onClick:o[0]||(o[0]=f=>p())},{loading:s(()=>[t(V,{size:"20px"})]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var $e=Q(we,[["__scopeId","data-v-5e4eba7d"]]);const b=a=>(I("data-v-18cb861c"),a=a(),P(),a),ke={class:"flex justify-between items-center"},Ce=b(()=>e("span",{class:"text-header"},"Detalles de la publicaci\xF3n",-1)),Qe={class:"row"},Ie=b(()=>e("div",{class:"col-6"},[e("span",{class:"q-label-input"},"T\xEDtulo")],-1)),Pe={class:"col-6"},Ve=b(()=>e("div",{class:"col-6 q-mt-sm"},[e("span",{class:"q-label-input"},"Autor")],-1)),Le={class:"col-6 q-mt-sm"},Fe=b(()=>e("div",{class:"col-6 q-mt-sm"},[e("span",{class:"q-label-input"},"Categoria")],-1)),Te={class:"col-6 q-mt-sm"},ze=b(()=>e("div",{class:"col-6 q-mt-sm"},[e("span",{class:"q-label-input"},"Cuerpo")],-1)),Be={class:"col-12 q-mt-md"},Ee=A({__name:"DialogViewArticle",props:{openDialog:{type:Boolean,required:!0}},setup(a){const l=a,n=q(),r=_(!1),i=v(()=>n.article);return M(()=>l.openDialog,()=>{r.value=!0}),(d,p)=>(u(),D(N,{modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=c=>r.value=c),persistent:""},{default:s(()=>[t(C,{class:"card-user"},{default:s(()=>[t(y,null,{default:s(()=>[e("div",ke,[Ce,Y(t(h,{name:"fa-solid fa-xmark",class:"cursor-pointer",size:"1rem"},null,512),[[j]])])]),_:1}),t(y,{class:"q-pt-none"},{default:s(()=>[e("div",Qe,[Ie,e("div",Pe,[e("span",null,m(i.value.title),1)]),Ve,e("div",Le,[e("span",null,m(i.value.autor),1)]),Fe,e("div",Te,[e("span",null,m(i.value.category),1)]),ze,e("div",Be,[t(C,{flat:"",bordered:""},{default:s(()=>[t(y,{class:"text-center"},{default:s(()=>[t(ie,{src:i.value.url_img,style:{"max-width":"300px"}},null,8,["src"])]),_:1}),t(y,{innerHTML:i.value.description},null,8,["innerHTML"])]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var Me=Q(Ee,[["__scopeId","data-v-18cb861c"]]);const Ye=e("div",{class:"text-center q-my-md"},[e("span",{class:"q-page-header"},"Gesti\xF3n de Publicaciones")],-1),He={class:"flex justify-end q-mb-md"},Ne=e("span",null,"Agregar una publicaci\xF3n",-1),ft=A({__name:"PublicationPage",setup(a){const l=q(),n=ae(),r=_(!1),i=_(!1),d=_(),p=_(1),c=g=>{d.value=g,r.value=!r.value},o=async g=>{await l.getArticleStore(g),i.value=!i.value},f=async g=>{l.isLoadingTable=!0,await l.getListArticlesStore(g)},x=v(()=>l.articles),O=v(()=>l.total_page),U=v(()=>n.categories),L=v(()=>l.isLoadingPageList);return K(async()=>{await n.getCategoriesStore(1),await l.getListArticlesStore(1)}),W(()=>{l.isLoadingPageList=!0,n.isLoadingPage=!0}),(g,F)=>(u(),S(E,null,[L.value?z("",!0):(u(),D(te,{key:0,class:"container"},{default:s(()=>[Ye,e("div",He,[t(k,{"no-caps":"",unelevated:"",ripple:!1,color:"primary",size:"0.8rem",to:{name:"OperationPublication"},disable:U.value.length==0},{default:s(()=>[t(h,{name:"fa-solid fa-plus",size:"0.7rem",class:"q-mr-sm"}),Ne]),_:1},8,["disable"])]),e("div",null,[t(De,{opendialogDeleteArticle:c,opendialogShowArticle:o,articlesState:x.value},null,8,["articlesState"]),x.value.length?(u(),D(ee,{key:0,size:"0.8rem",class:"fles justify-end q-mt-md",modelValue:p.value,"onUpdate:modelValue":[F[0]||(F[0]=R=>p.value=R),f],max:O.value,"direction-links":"",outline:"",color:"primary","active-design":"unelevated","active-color":"primary","active-text-color":"white"},null,8,["modelValue","max"])):z("",!0)]),t(Me,{openDialog:i.value},null,8,["openDialog"]),t($e,{openDialog:r.value,articleID:d.value},null,8,["openDialog","articleID"])]),_:1})),t(H,{showing:L.value},{default:s(()=>[t(V,{size:"35px",color:"primary"})]),_:1},8,["showing"])],64))}});export{ft as default};
