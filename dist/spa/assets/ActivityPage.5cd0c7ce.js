import{C as S,S as U,o as x,D as u,E as D,F as s,O as e,H as A,G as t,I as R,L as f,M as P,Q as g,N as B,_ as I,P as C,R as V,r as p,w as E,v as M,T as k,q as G,a1 as J,J as z}from"./index.4f03f91b.js";import{Q as K,N as W,a as X}from"./NoResults.67ae0d4a.js";import{Q as Z}from"./QPage.93c896a6.js";import{Q as L}from"./QSpinnerBars.faaa4498.js";import{Q as Y}from"./QInnerLoading.87f5c047.js";import{u as b}from"./Activity.f707e19b.js";import{Q as $}from"./QTooltip.0294f36c.js";import{d as F}from"./date.f0f289d7.js";import{Q as h,a as Q}from"./QCard.15344bc4.js";import{Q as H}from"./QDialog.a4be6c36.js";import{C as N}from"./ClosePopup.0885fbba.js";import{w as ee,n as te,A as ae}from"./api_rest.be0b8500.js";import{Q as se}from"./QImg.58aea539.js";import"./use-dark.187236d0.js";import"./QInput.d45c9e43.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./format.2bc25e5f.js";import"./use-transition.9e1010fb.js";import"./position-engine.11586397.js";import"./selection.82da9296.js";import"./use-model-toggle.422ce669.js";import"./use-prevent-scroll.adeeee81.js";import"./axios.beb5d2fc.js";const w=a=>(C("data-v-39c50290"),a=a(),V(),a),oe=w(()=>e("thead",{class:"bg-grey-2"},[e("tr",null,[e("th",{class:"text-left"},"T\xEDtulo"),e("th",{class:"text-left"},"Autor"),e("th",{class:"text-left"},"Fecha de creaci\xF3n"),e("th",{class:"text-left"},"Fecha de modificaci\xF3n"),e("th",{class:"text-right"},"Acciones")])],-1)),ie={key:0,class:"q-tr--no-hover"},le={colspan:"5"},ne={class:"text-left"},ce={class:"text-left"},re={class:"text-left"},de={class:"text-left"},ue={class:"text-right"},pe={class:"q-gutter-x-md"},me=w(()=>e("span",null,"Ver",-1)),_e=w(()=>e("span",null,"Editar",-1)),ve=w(()=>e("span",null,"Eliminar",-1)),fe=S({__name:"TableActivityDesk",props:{opendialogDeleteActivity:{type:Function,required:!0},opendialogShowActivity:{type:Function,required:!0},activitiesState:{type:Object,required:!0}},setup(a){const i=U(),c=b(),l=x(()=>c.isLoadingTable),n=async d=>{i.push({name:"OperationActivity",params:{id:d}})};return(d,m)=>(u(),D(K,{flat:"",bordered:""},{default:s(()=>{var r;return[oe,e("tbody",null,[(r=a.activitiesState)!=null&&r.length?(u(!0),A(B,{key:1},R(a.activitiesState,(o,_)=>(u(),A("tr",{key:_},[e("td",ne,f(o.title),1),e("td",ce,f(o.autor),1),e("td",re,f(P(F).formatDate(o.created_at,"DD-MM-YYYY HH:mm:ss")),1),e("td",de,f(P(F).formatDate(o.updated_at,"DD-MM-YYYY HH:mm:ss")),1),e("td",ue,[e("div",pe,[t(g,{name:"fa-solid fa-eye",color:"positive",class:"cursor-pointer",onClick:y=>a.opendialogShowActivity(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[me]),_:1})]),_:2},1032,["onClick"]),t(g,{name:"fa-solid fa-edit",color:"primary",class:"cursor-pointer",onClick:y=>n(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[_e]),_:1})]),_:2},1032,["onClick"]),t(g,{name:"fa-regular fa-trash-can",color:"red",class:"cursor-pointer",onClick:y=>a.opendialogDeleteActivity(o.id)},{default:s(()=>[t($,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:s(()=>[ve]),_:1})]),_:2},1032,["onClick"])])])]))),128)):(u(),A("tr",ie,[e("td",le,[t(W)])])),t(Y,{showing:l.value},{default:s(()=>[t(L,{size:"25px",color:"primary"})]),_:1},8,["showing"])])]}),_:1}))}});var ge=I(fe,[["__scopeId","data-v-39c50290"]]);const ye=a=>(C("data-v-5012e9e7"),a=a(),V(),a),he={class:"flex column justify-center items-center"},xe=ye(()=>e("span",null,"\xBFEsta seguro que desea eliminar esta actividad?",-1)),De={class:"btn-actions q-gutter-x-md q-mt-md"},Ae=S({__name:"DialogDeleteActivity",props:{openDialog:{type:Boolean,required:!0},activityID:{type:Number,required:!1}},setup(a){const i=a,c=b(),l=p(!1),n=p(!1),d=p(null),m=async()=>{var r;n.value=!0;try{await ee(i.activityID),te("success","Actividad eliminada correctamente"),d.value.hide(),c.isLoadingTable=!0,await c.getListActivitiesStore()}catch(o){o instanceof ae&&console.log((r=o.response)==null?void 0:r.data)}finally{n.value=!1}};return E(()=>i.openDialog,()=>{l.value=!0}),(r,o)=>(u(),D(H,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=_=>l.value=_),persistent:"",ref_key:"refDialog",ref:d},{default:s(()=>[t(Q,{class:"card-article"},{default:s(()=>[t(h,null,{default:s(()=>[e("div",he,[t(g,{name:"fa-solid fa-circle-exclamation",color:"grey-4",size:"2.5rem",class:"q-mb-md"}),xe]),e("div",De,[M(t(k,{"no-caps":"",unelevated:"",color:"grey-6",label:"Cancelar",size:"0.9rem",type:"button"},null,512),[[N]]),t(k,{"no-caps":"",unelevated:"",color:"red",label:"Eliminar",size:"0.9rem",type:"submit",loading:n.value,onClick:o[0]||(o[0]=_=>m())},{loading:s(()=>[t(L,{size:"20px"})]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var Se=I(Ae,[["__scopeId","data-v-5012e9e7"]]);const q=a=>(C("data-v-f96c57f2"),a=a(),V(),a),be={class:"flex justify-between items-center"},we=q(()=>e("span",{class:"text-header"},"Detalles de la actividad",-1)),qe={class:"row"},$e=q(()=>e("div",{class:"col-6"},[e("span",{class:"q-label-input"},"T\xEDtulo")],-1)),ke={class:"col-6"},Qe=q(()=>e("div",{class:"col-6 q-mt-sm"},[e("span",{class:"q-label-input"},"Autor")],-1)),Ie={class:"col-6 q-mt-sm"},Ce=q(()=>e("div",{class:"col-6 q-mt-sm"},[e("span",{class:"q-label-input"},"Cuerpo")],-1)),Ve={class:"col-12 q-mt-md"},Le=S({__name:"DialogViewActivity",props:{openDialog:{type:Boolean,required:!0}},setup(a){const i=a,c=b(),l=p(!1),n=x(()=>c.activity);return E(()=>i.openDialog,()=>{l.value=!0}),(d,m)=>(u(),D(H,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=r=>l.value=r),persistent:""},{default:s(()=>[t(Q,{class:"card-activity"},{default:s(()=>[t(h,null,{default:s(()=>[e("div",be,[we,M(t(g,{name:"fa-solid fa-xmark",class:"cursor-pointer",size:"1rem"},null,512),[[N]])])]),_:1}),t(h,{class:"q-pt-none"},{default:s(()=>[e("div",qe,[$e,e("div",ke,[e("span",null,f(n.value.title),1)]),Qe,e("div",Ie,[e("span",null,f(n.value.autor),1)]),Ce,e("div",Ve,[t(Q,{flat:"",bordered:""},{default:s(()=>[t(h,{class:"text-center"},{default:s(()=>[t(se,{src:n.value.url_img,style:{"max-width":"300px"}},null,8,["src"])]),_:1}),t(h,{innerHTML:n.value.description},null,8,["innerHTML"])]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var Te=I(Le,[["__scopeId","data-v-f96c57f2"]]);const Pe=e("div",{class:"text-center q-my-md"},[e("span",{class:"q-page-header"},"Gesti\xF3n de Actividades")],-1),ze={class:"flex justify-end q-mb-md"},Fe=e("span",null,"Agregar una actividad",-1),ct=S({__name:"ActivityPage",setup(a){const i=b(),c=p(!1),l=p(!1),n=p(),d=p(1),m=v=>{n.value=v,c.value=!c.value},r=async v=>{await i.getActivityStore(v),l.value=!l.value},o=x(()=>i.activities),_=x(()=>i.total_pages),y=x(()=>i.isLoadingPageList),j=async v=>{i.isLoadingTable=!0,await i.getListActivitiesStore(v)};return G(async()=>{await i.getListActivitiesStore(1)}),J(()=>{i.isLoadingPageList=!0}),(v,T)=>(u(),A(B,null,[y.value?z("",!0):(u(),D(Z,{key:0,class:"container"},{default:s(()=>[Pe,e("div",ze,[t(k,{"no-caps":"",unelevated:"",ripple:!1,color:"primary",size:"0.8rem",to:{name:"OperationActivity"}},{default:s(()=>[t(g,{name:"fa-solid fa-plus",size:"0.7rem",class:"q-mr-sm"}),Fe]),_:1})]),e("div",null,[t(ge,{opendialogDeleteActivity:m,opendialogShowActivity:r,activitiesState:o.value},null,8,["activitiesState"]),o.value.length?(u(),D(X,{key:0,size:"0.8rem",class:"fles justify-end q-mt-md",modelValue:d.value,"onUpdate:modelValue":[T[0]||(T[0]=O=>d.value=O),j],max:_.value,"direction-links":"",outline:"",color:"primary","active-design":"unelevated","active-color":"primary","active-text-color":"white"},null,8,["modelValue","max"])):z("",!0)]),t(Te,{openDialog:l.value},null,8,["openDialog"]),t(Se,{openDialog:c.value,activityID:n.value},null,8,["openDialog","activityID"])]),_:1})),t(Y,{showing:y.value},{default:s(()=>[t(L,{size:"30px",color:"primary"})]),_:1},8,["showing"])],64))}});export{ct as default};
